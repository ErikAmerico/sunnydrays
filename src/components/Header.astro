---
import { SITE } from "../config/site";

const links = [
  { href: "/", label: "Home" },
  { href: "/about", label: "About" },
  { href: "/services", label: "Services" },
  { href: "/intake", label: "Book Cleaning" },
  { href: "/contact", label: "Contact" },
];

const pathname = Astro.url.pathname;

function isActive(href: string) {
  return href === "/" ? pathname === "/" : pathname.startsWith(href);
}
---

<header
  class="sticky top-0 z-40 border-b border-b-[#d93a1b] bg-white/75 backdrop-blur"
>
  <div class="mx-auto flex h-16 max-w-6xl items-center justify-between px-5">
    <a
      class="flex items-center gap-2 font-semibold tracking-tight"
      href="/"
      aria-label="Go to homepage"
    >
      <img src="/assets/logo.png" alt="" width="34" height="34" class="block" />
      <span>{SITE.name}</span>
    </a>

    <nav class="hidden items-center gap-6 md:flex" aria-label="Primary">
      {
        links.map((l) => (
          <a
            href={l.href}
            class={`text-sm font-medium transition hover:opacity-80 ${
              isActive(l.href)
                ? "text-slate-900 underline underline-offset-8"
                : "text-slate-600"
            }`}
          >
            {l.label}
          </a>
        ))
      }
    </nav>

    <div class="flex items-center gap-3">
      <a
        href="/intake"
        class="hidden rounded-xl bg-[#d93a1b] px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-[#F29710] sm:inline-flex"
      >
        Get Started
      </a>

      <details class="relative md:hidden">
        <summary
          class="cursor-pointer list-none rounded-xl border px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50"
        >
          Menu
        </summary>
        <div
          class="absolute right-0 mt-2 w-56 overflow-hidden rounded-2xl border bg-white shadow-lg"
        >
          <div class="grid p-2">
            {
              links.map((l) => (
                <a
                  href={l.href}
                  class={`rounded-xl px-3 py-2 text-sm font-medium hover:bg-slate-50 ${
                    isActive(l.href) ? "text-slate-900" : "text-slate-700"
                  }`}
                >
                  {l.label}
                </a>
              ))
            }
            <a
              class="mt-2 rounded-xl bg-slate-900 px-3 py-2 text-center text-sm font-semibold text-white"
              href="/intake"
            >
              Get Started
            </a>
          </div>
        </div>
      </details>
    </div>
  </div>
</header>
